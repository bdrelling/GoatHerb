name: Tests

on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  swift_test:
    uses: bdrelling/ci/.github/workflows/swift_test.yml@main
    secrets:
      DISCORD_CI_WEBHOOK: ${{ secrets.DISCORD_CI_WEBHOOK }}
      GITHUB_ACCESS_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    with:
      scheme: GoatHerb
      # GitHub's API is rate limited and this SDK doesn't use authentication.
      # As such, we'll only test our core platforms (macOS and Linux, for Server-side Swift support).
      platforms: macOS Linux
      swift-versions: 5.5 5.6
